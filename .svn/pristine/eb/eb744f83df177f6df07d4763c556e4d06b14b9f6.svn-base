@using JahanAraShop.Resourecs
@model JahanAraShop.Models.InvoiceViewModel
@{
    ViewBag.Title = "RedirectVpos";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<main class="main cart dir ">
    <div class="container">
        <div class="row sec-mar border">
            <div class="col-md-12 col-sm-12">
                <br />
                <h3>مشخصات مشتری</h3>
                <div class="checkout-product">
                    <b>@Labels.BuyerName: @(Model.Buyer.FirstName + " " + Model.Buyer.Name)</b><br /><br />
                    <b>@Labels.CellPhone: @Model.Buyer.CellPhone</b> <br /><br />
                    <b>@Labels.BuyerAddress: @Model.Buyer.Address</b><br /><br />
                    <b>@Labels.Tel: @Model.Buyer.Phone1</b> <br /><br />
                    <b>@Labels.Email: @Model.Buyer.Email</b>
                </div>
                <br />
            </div>
            <!--shop table-->
        </div>
    </div>
    <div class="container">
        <div class="row sec-mar ">
            <div class="col-md-12 col-sm-12 bdr-box">
                <table class="table_shop">
                    <thead>
                        <tr>
                            <th class="pdt_qty">ردیف</th>
                            <th class="pdt_name">محصولات</th>
                            <th class="pdt_price">قیمت واحد</th>
                            <th class="pdt_qty">تعداد</th>
                            <th class="pdt_subtotal">قیمت کل</th>
                        </tr>
                    </thead>
                    <tbody>

                        @{ decimal sum = 0; short Row = 1; decimal total = 0; }
                        @foreach (var item in Model.Items)
                        {
                            { total = item.Price.Value * item.Count; }
                            <tr class="crt_itm">
                                <td>@Row</td>
                                <td>@item.Name</td>

                                <td class="pdt_price" data-title="Price">
                                    @item.Price.Value.ToString("#,##0")
                                    <span class="portraitItme">ریال</span>
                                </td>
                                <td>@item.Count</td>
                                <td class="pdt_price" data-title="Price">
                                    @total.ToString("#,##0")
                                    <span class="portraitItme">ریال</span>
                                </td>

                            </tr>
                            sum += total;
                            Row++;
                        }
                    </tbody>
                </table>
            </div>

            <!--shop table-->
            <div class="bdr-box cart-collaterals">
                <table class="table_shop">
                    <tbody>
                        @{

                            var post = Model.PostCost;
                            var sumTotal = (sum - sum * int.Parse(Model.DiscountPrecent) / 100) + int.Parse(post);
                            var discountval = sum * int.Parse(Model.DiscountPrecent) / 100;

                        }
                        <tr>
                            <td>تخفیف</td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td>هزینه پست</td>
                            <td id="TotalPrice">
                                @int.Parse(post).ToString("#,##0")
                                <span class="portraitItme">ریال</span>
                            </td>
                        </tr>

                        <tr>
                            <td>جمع کل</td>
                            <td id="TotalPriceAtferDiscount">
                                @((sumTotal).ToString("#,##0"))
                                <span class="portraitItme">ریال</span>
                            </td>

                        </tr>
                    </tbody>
                </table>
                <a class="btn pri-bg" href="@Url.Action(MVC.Shop.Authenticate())">ادامه ثبت سفارش</a>
            </div>

        </div>
        <div class="dir" id="dialog"></div>

    </div>
</main>
