using JahanAraShop.Data.Context;
using JahanAraShop.Domain.DomainModel;
using JahanAraShop.Models;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace JahanAraShop.Controllers
{
    public partial class HomeController : Controller
    {
      
        // GET: Home
        public virtual ActionResult Index()
        {


           
            using (var db=new DataBaseContext())
            {
                var GoodGroup = new GoodViewModel();
                GoodGroup.FirstLevel = db.tblGoodGroups.Where(x => x.ParentID == null && x.TabletVisible == true).ToList();
                GoodGroup.SecondLevel = db.tblGoodGroups.Where(x => x.ParentID != null && x.TabletVisible == true ).ToList();
                var list = GoodGroup.SecondLevel.Select(c => c.ID).ToList();
                GoodGroup.ThirdLevel = db.tblGoodGroups.Where(x =>list.Contains((x.ID))).ToList();
              //  GoodGroup.ThirdLevel = db.tblGoodGroups.Where(x =>x.ParentID==2132).ToList();
              
                TempData["GoodMenu"] = GoodGroup;
            
                return View();
            }

           

        }
    }
}